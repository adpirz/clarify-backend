{% extends "base.html" %}
{% load percentages %}
{% block content %}
    <table id="datatable" class="table table-striped table-bordered">
    <thead>
    <tr>
        <th>Student ID</th>
        <th>Start date</th>
        <th>End date</th>
        <th>Category Name</th>
        <th>Percentage</th>
        <th>Total Earned Points</th>
        <th>Points Possible</th>
        <th>Number of assignments</th>
    </tr>
    </thead>

    <tbody>
    {% for grade_set in data %}
        {% for cat_grade in grade_set.category_grades %}
            <tr>
                <td>{{ cat_grade.student_id }}</td>
                <td>{{ grade_set.start_date | date:'Y-m-d' }}</td>
                <td>{{ grade_set.end_date | date:'Y-m-d' }}</td>
                <td>{{ cat_grade.category_name }}</td>
                <td>{{ cat_grade.percentage | percentage }}</td>
                <td>{{ cat_grade.total_points }}</td>
                <td>{{ cat_grade.possible_points }}</td>
                <td>
                    <a href={% url "experiment:assignments_detail" cat_grade.student_id cat_grade.gradebook_id grade_set.start_date grade_set.end_date cat_grade.category_id%}>
                    {{ cat_grade.number_of_assignments }}
                    </a>
                </td>
            </tr>
        {% endfor %}
    {% endfor %}
    </tbody>

    </table>
{% endblock %}
{% block js %}
<script>
$(document).ready(()=>{
    $('#datatable').DataTable({
        paging: false,
        buttons: ['csv', 'copy', 'colvis'],
        colReorder: true,
        keys: true,
        fixedHeader: true
    });
})
</script>
{% endblock %}